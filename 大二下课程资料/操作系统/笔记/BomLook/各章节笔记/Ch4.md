# Ch4

## 文件系统概述
**长期信息存储的要求**

- 必须存储**大量数据**。
- 存储的信息必须在使用它的进程终止后**继续存在**。
- 多个进程必须能够**同时访问信息**。

**解决方案**

- 将信息存储在**磁盘或其他外部媒体上**，以称为**文件**的单元中。
- 文件系统是**操作系统中管理文件的部分**。

**文件系统的基本功能**

- ==提供文件和目录的逻辑（抽象）视图==。
  - 隐藏硬件设备的复杂性。

- ==促进存储设备的高效使用==。
  - 优化访问（例如磁盘）。

- ==支持共享==。
  - 提供保护。


## 文件
### 文件命名
- 文件名格式：`FileName.FileExtension`
- 有效名称：
  - 字符数量：最多255个字符。
  - 区分大小写。
  - 扩展名与文件类型相关，通过应用程序使用，例如：
    - `.bak`：备份文件
    - `.c`：C语言源程序
    - `.jpg`：JPEG格式的图片
    - `.mp3`：MPEG层3音频格式的音乐
    - `.pdf`：便携式文档格式文件
    
    ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271827842.webp)

### 文件结构
- **无结构**：字节序列（Unix、Windows）。

- **简单记录结构**：固定长度的行。

- **复杂结构**：记录树，记录包含键，树按键排序。记录长度不一定相同

  ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271829537.webp)

### 文件类型
- **普通文件**：包含用户信息，如ASCII文件（可显示、打印、编辑）和二进制文件（可执行文件、存档文件）。

- **目录**：用于**维护文件系统结构的系统文件**。

- **字符特殊文件**：用于==模拟串行I/O设备==（如终端、打印机、网络）。

- **块特殊文件**：用于==模拟磁盘==。

  ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271831139.webp)

### 文件访问
- **顺序访问**：从头开始读取所有字节/记录，**不能跳转，可以倒带或回退**。
- **随机访问**：以**任意顺序读取字节/记录**，对数据库系统至关重要。
  - 两种方法：
    - 先读取，然后移动文件标记。
    - 先移动文件标记（seek），然后读取（Unix、Windows）。

### 文件属性
- 操作系统为每个文件关联额外的信息，称为文件属性（元数据）。

  ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271832564.webp)

### 文件操作
- 创建、删除、打开、关闭、读取、写入、追加、查找、获取属性、设置属性、重命名。（字节序列文件的操作）

### 示例程序
- 文件复制程序，使用文件系统调用，错误检查和报告最少。

  ```c
  /* File copy program. Error checking and reporting is minimal. */
  #include <sys/types.h>    /* include necessary header files */
  #include <fcntl.h>
  #include <stdlib.h>
  #include <unistd.h>
  
  int main(int argc, char *argv[]);    /* ANSI prototype */
  #define BUF_SIZE 4096    /* use a buffer size of 4096 bytes */
  #define OUTPUT_MODE 0700    /* protection bits for output file */
  
  int main(int argc, char *argv[]) {
      int in_fd, out_fd, rd_count, wt_count;
      char buffer[BUF_SIZE];
  
      if (argc != 3) exit(1);    /* syntax error if argc is not 3 */
  
      /* Open the input file and create the output file */
      in_fd = open(argv[1], O_RDONLY); /* open the source file */
      if (in_fd < 0) exit(2); /* if it cannot be opened, exit */
      out_fd = creat(argv[2], OUTPUT_MODE); /* create the destination file */
      if (out_fd < 0) exit(3); /* if it cannot be created, exit */
  
      /* Copy loop */
      while (1) {  /* Note: Original used 'TRUE', but standard C requires '1' or a macro */
          rd_count = read(in_fd, buffer, BUF_SIZE); /* read a block of data */
          if (rd_count <= 0) break; /* if end of file or error, exit loop */
          wt_count = write(out_fd, buffer, rd_count); /* write data */
          if (wt_count <= 0) exit(4); /* wt_count <= 0 is an error */
      }
  
      /* Close the files */
      close(in_fd);
      close(out_fd);
      if (rd_count == 0) exit(0); /* no error on last read */
      else exit(5); /* error on last read */
  }
  ```

  

## 目录
### 目录的作用
- 文件系统使用==目录或文件夹来跟踪文件==。
- 目录是一个文件，包含**文件名与文件位置之间的对应关系**。
- 目录条目包含文件的信息（即其属性）。
- 目录条目**在创建文件时创建，在删除文件时移除**。
- **目的**：
  - 效率——**快速定位文件**
  - 命名——**对用户方便**
    - 两个用户可以**对不同的文件使用相同的名称**
    - 同一个文件可以**有几个不同的名称**

  - 分组——根据属性对文件进行逻辑分组（例如，所有 Java 程序、所有游戏、……）


### 目录结构
- **单级目录系统**：一个目录（根目录）包含所有文件。
  - 优点：易于支持和理解。
  - 缺点：**命名冲突问题（所有文件必须具有唯一名称）、分组问题（在大型文件系统中难以记住文件名**）。
  
  ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271841235.webp)
- **两级目录系统**：每个用户一个目录，用户名和文件名定义路径名。
  
  - 优点：**解决命名冲突问题（不同用户可以拥有相同文件名）、支持文件共享和保护、高效搜索。**
  - 缺点：**分组问题未解决**。
  
  ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271842990.webp)
- **层次目录系统**：根目录和任意数量的子目录。
  
  - 两级目录系统的泛化（任意高度）：**叶子节点是文件，内部节点是目录**
  - 每个用户有一个当前目录（工作目录），可以通过 `cd` 命令或系统调用更改当前目录，路径名可以是绝对路径或相对路径。
  - 优点：**解决命名冲突问题（不同用户可以拥有相同文件名）、支持文件共享和保护、分组能力**。
  
  ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271845687.webp)

### 路径名

在目录树中指定文件名有两种不同的方法：

- **绝对路径名**：从根目录到文件的路径。
- **相对路径名**：从当前目录（工作目录）到文件的路径。
- 特殊条目：
  - `.`（点）：当前目录。
  - `..`（双点）：父目录。

![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271847260.webp)

### 目录操作
- 创建新目录、删除空目录、打开目录以供读取、关闭目录以释放空间、读取目录条目（返回目录中的下一个条目）、重命名目录、创建链接（硬链接，即从现有文件创建一个链接到路径名）、删除链接（删除一个硬链接）。

### Unix目录相关系统调用
- `mkdir(path, mode)`：创建新目录。
- `rmdir(path)`：删除目录。
- `link(oldpath, newpath)`：为现有文件创建链接。
- `unlink(path)`：删除链接。
- `chdir(path)`：更改工作目录。
- `opendir(path)`：打开目录以供读取。
- `closedir(dir)`：关闭目录。
- `readdir(dir)`：读取一个目录条目。
- `rewinddir(dir)`：将目录重置为可重新读取。

![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271849127.webp)

Linux 文件系统基于树状层次结构，其文件系统的结构是从 Unix 文件系统的结构演变而来的。

![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271857357.webp)



## 文件系统实现

### 文件系统布局
- **主引导记录（MBR）**：位于扇区0，==用于启动计算机==。
- **分区表**：提供每个分区的**起始和结束地址**，**其中一个被标记为活动**。每个分区可以包含自己的文件系统、Unix 文件系统、Windows 文件系统或其他文件系统。
- **引导块**：每个分区的起始块，==包含加载该分区操作系统的程序==。
- **超级块**：**描述文件系统的状态**，包括分区大小、块大小、空闲块列表指针、根目录的i节点号等。
- **文件和目录**：存储在磁盘上。
- **OS 启动**：==BIOS 读取 MBR，然后定位活动分区，读取其引导块并执行它==。

![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271902066.webp)



**文件字节和磁盘扇区的比较**

- 文件是由一系列字节组成的
  - 文件 I / O 的粒度是字节。
- 磁盘是由扇区构成的数组（**512 字节**）
  - 磁盘 I / O 的粒度是扇区，文件数据必须存储在扇区中。
- 文件系统定义了一个块大小
  - 块大小 = $2^n$ 扇区大小。
  - 连续的扇区被分配给一个块。
- 文件系统将磁盘视为一个块数组
  - 必须为文件分配块，并管理磁盘上的空闲空间。



### 文件实现
- 实现文件存储需要**跟踪哪些磁盘块属于哪些文件**。

- 四种方法：
  - **连续分配**：将每个文件存储为连续的数据块。
    - 优点：**实现简单**（仅需起始扇区与文件长度），**读取性能优秀**（适用于顺序访问和直接访问）。
    - 缺点：**存在外部碎片，文件大小必须在创建时确定**（否则文件无法增长）。
    - **适合 CD-ROM、DVD 和其他一次性写入的光介质**（所有文件大小都是预先已知的 ，文件永远不会被删除）
    
    ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271909931.webp)
    
    ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271910326.webp)
    
  - **链表分配**：将文件存储为磁盘块的链表，块可以分散在磁盘上。每个块的第一个字用作指向下一个块的指针。
    
    - 优点：**无外部碎片，文件可以动态增长**（只要有空闲块即可）。**目录项简单（只需起始地址）**。**适合顺序访问。**
    - 缺点：随机访问慢，块内数据量不是2的幂。
    
    ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271926439.webp)
    
    ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271928647.webp)
  
  
  
  - **使用 FAT 的链表分配**：从每个数据块中取出**表指针字，并将它们放入索引表**，即文件分配表（FAT）。每个分区开头都保留一段磁盘空间来存放 FAT
  
    - FAT 应该保留在内存中，以减少磁盘寻道时间，空间开销可能非常大
  
    - FAT：
  
      - 磁盘上每个块一个条目，按块号排序
      - 每个条目包含“下一个”块的地址
      - 文件结束标记（-1）
      - 一个特殊值（例如-2）表示该块是空闲的
  
      （说人话，就是把原来的链表索引，把指针都收集在一个表（即FAT）中，通过查完表，再去寻找目标块）
  
      - 由 OS/2 和 MS-DOS 使用
  
  
    - **优点**：
      - 整个区块可以用于数据，不需要分配额外的指针指向下一个块
      - 实现随机访问，通过搜索在内存中的整个链表实现
      - 目录项只需要一个字（起始块号）
    - **缺点**：整个表都需要在内存中。如果一个 200GB 的磁盘，一个块大小为 1KB，FAT 的条目大小为 4字节，那么需要使用 800MB 来存储 FAT。
  
    ![image-20250615210633458](./../../source/images/Ch4/image-20250615210633458.png)
  
    ![image-20250615211255212](./../../source/images/Ch4/image-20250615211255212.png)
  
  - **索引分配（i-Node）**：**将所有指针集中在一个索引块（i-Node）中**。
    - 优点：**快速查找和随机访问，无外部碎片**。
    - 缺点：索引空间开销。

### 索引分配（i-Node）的细节
- **每个文件都有自己的 i-Node，包含文件属性和磁盘块地址**。

- 所有指针汇集到一个位置（索引块或索引节点）

  ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271933855.webp)

- 当相应的文件被打开时，加载对应的 i 节点到内存中即可。

  ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271936837.webp)

- i-Node在硬盘上**以二维数组形式存储。**

- 如果文件大小**超过i-Node的固定地址数量**，**某些索引条目会指向索引块（而非数据块，即具有多级索引结构**）。

- 多级索引分配：
  - 单级间接块：指向数据块。
  - 双级间接块：指向单级间接块。
  - 三级间接块：指向双级间接块。

  ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271937083.webp)

- **优点**：

  - **快速查找和随机访问**
  - **不会受到外部碎片化影响**
  - i-Node 只需**在文件打开时驻留在内存中**

- **缺点**：==索引的空间开销==

## 文件系统可靠性与性能
### 磁盘空间管理
- 管理磁盘上的空闲空间，以==高效分配和回收磁盘块==。

### 文件系统可靠性
- 确保文件系统在==硬件故障或系统崩溃后能够恢复==。

### 文件系统性能
- 优化文件系统的读写速度和响应时间。

## Linux文件系统结构
### Linux文件系统基于树形层次结构
- 根目录（`/`）：系统的核心目录。
- 常见目录：
  - `/bin`：系统二进制文件。
  - `/boot`：启动文件。
  - `/dev`：设备文件。
  - `/etc`：配置文件。
  - `/home`：用户主目录。
  - `/lib`：库文件。
  - `/mnt`：挂载点。
  - `/root`：超级用户目录。
  - `/tmp`：临时文件。
  - `/var`：可变数据文件。

---

## 总结
- 文件系统是操作系统中管理文件的关键部分，负责**存储、组织和保护文件**。
- 文件系统的设计需要**平衡存储效率、访问速度和可靠性**。
- 文件和目录的结构、命名和访问方式对用户和系统实现者都至关重要。
- Linux文件系统基于层次结构，具有丰富的目录和文件类型支持，适用于多种应用场景。







## 目录的实现
### 目录存储方式
- **目录存储**：目录**像普通文件一样存储**，**目录条目包含在数据块中。**
- **目录文件**：是一个**包含目录条目的列表**。
- **文件打开**：文件系统使用路径名定位目录条目，目录条目提供**查找磁盘块所需的信息**（如连续块的磁盘地址、链表的第一个块号或i-Node号）。

### 文件属性的存储位置
- **存储在目录条目中**：
  - **固定大小的条目。**
  
  - **磁盘地址和属性**都在目录条目中。
  
  - 例如：MS-DOS/Windows。
  
    ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271945336.webp)
  
- **存储在单独的数据结构中（如i-Node）**：
  
  - 目录条目包含**文件名和i-Node号**。
  
  - i-Node包含**文件属性**。
  
  - 例如：Unix。
  
    ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271946160.webp)

### 长文件名的处理
- **固定长度文件名**：
  
  - 最多255个字符。
  - **简单直接，但会浪费空间**。
  
- **固定和可变部分（内联）**：
  
  - 固定部分包含**条目大小和属性**。
  
  - **可变部分包含文件名**。
  
  - 节省内存，但删除文件后会==产生可变大小的空隙==。
  
  - ==单个目录项可能跨越多个页面，因此在读取文件名时可能会发生页面错误==
  
    ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271947108.webp)
  
- **固定长度条目，文件名在堆中**：
  - **容易删除文件，无需压缩**。
  - 文件名后**不需要填充字符**。
  - 需要管理堆。
  - 处理文件名时**可能会发生页面错误**。
  
  ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271951551.webp)

### 4. 目录搜索方法
- **线性搜索**。
- **哈希表**。
- **缓存搜索结果**。

## 共享文件
### 共享文件的概念
- 共享文件允许**一个文件在多个目录中出现**。
- ==目录与共享文件之间的连接称为链接==。
- 文件系统是一个有向无环图（DAG），而不是树形结构。

![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271954527.webp)

### 共享文件的问题
- 如果目录中包含磁盘地址，需要在目录B中复制磁盘地址。
- 如果B或C追加文件，**新块只会出现在一个目录中**。

### 解决方案
- **硬链接（Hard Link）**：
  - 不在目录中列出磁盘块地址，而是存储在i-Node中。
  - 两个目录指向同一个i-Node。
  
  ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271956810.webp)
- **符号链接（Symbolic Link，软链接）**：
  
  - 一个目录指向文件的i-Node，**另一个目录包含“路径”**。
  - 符号链接是一个单独的文件，包含目标文件的路径名。
  
  ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505271956166.webp)

### 硬链接与符号链接的比较
- **硬链接**：
  - 删除文件时，**目录条目从目录中移除，文件的引用计数减1**。
  - **当引用计数为0时，回收文件的所有块**。
  - **局限性**
    - 硬链接==不能跨文件系统==。
    - ==只有超级用户可以对目录创建硬链接==。
    - 如果其中一个文件被移动到不同的文件系统，则会复制该文件，并相应地调整两个文件的链接计数
  
  ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505272015375.webp)
- **符号链接**：
  - **删除原始文件时，符号链接会变成“断开的链接”。**
  - **删除符号链接不会影响文件。**
  - **局限性**：
    - 符号链接需要额外的磁盘空间和i-Node。
    - 符号链接需要==额外的路径遍历开销==。
    - ==如果原始文件移动到其他位置，符号链接将无法访问（悬空链接）==。
    - 将文件转储到磁带时，多个文件副本需要复杂。



## 磁盘空间管理
### 文件存储策略
- **连续分配**：为文件分配连续的磁盘空间。
  - **优点：简单，适合顺序访问。**
  - **缺点：文件增长时需要移动，导致外部碎片。**
  - 存储一个 $n$ 字节文件的方法：
    - 分配 $n$ 个连续字节的磁盘空间——分段
    - 分配 $[\frac{n}{k}]$个大小为 $k$ 字节的块——分页
  - 连续分配的问题：**如果文件增长，它将不得不在磁盘上移动，这是一个昂贵的操作，并会导致外部碎片。几乎所有文件系统都将文件分割成固定大小的块，这些块不必相邻（即分页分配）**。
- **分页分配**：将文件分配为固定大小的块。
  - 优点：**避免外部碎片**。
  - 缺点：**内部碎片（最后一个块可能未完全使用）**。

### 块大小的选择
- **大块大小**：
  - 内部碎片：平均浪费1/2块空间。
  - 当有很多非常小的文件时，浪费更大。
  - ==性能更好，但磁盘利用率低==。
- **小块大小**：
  - 更多的寻道操作，文件访问速度慢。
  - ==磁盘利用率高，但性能差==。
- **常见块大小**：1KB、2KB、4KB。
- 性能和空间利用率本质上存在冲突：

  - 更大的块大小：更高的数据速率，更低的存储空间利用率
  - 更小的块大小：更低的数据速率，更高的存储空间利用率

  ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505272034052.webp)

### 管理空闲块
- **链表**：
  
  - ==每个块存储尽可能多的空闲块号==。
  
  - **优点：简单。**
  
  - **缺点：需要更多块来存储空闲块信息。**
  
  - Example: With 1 KB block and 32-bit disk block number ➔ $1024 * 8/32 = 256$ disk block numbers ➔ 255 free blocks (and) 1 next block pointer.
  
    ![](https://cdn.jsdelivr.net/gh/BomLook/blog-pic@main/img/202505272049372.webp)
  
- **位图（Bitmap）**：
  - 一个包含 $n$ 个块的磁盘需要一个包含 $n$ 个位的位图，每个块用一个位表示（1表示空闲，0表示已分配）。
  - **优点**：如果能完全驻留在内存中，效率更高。
  - **缺点**：需要更多空间来存储位图。

- **位图 VS 链表**：
  - Using bit-map: A 16GB disk has $2^{24}$ 1-KB and requires $2^{24}$ bits ➔ 2048 blocks
  - Using a linked list：$2^{24} /255 = 65793$ blocks
  - The bitmap requires less space
  - Only if the disk is nearly full (i.e., has few free blocks) will the linked list scheme require fewer blocks than the bitmap

- **计数法**：
  - 存储第一个空闲块的地址和连续空闲块的数量。
  - 优点：如果空闲块较多，可以减少存储需求。  
  - 缺点：每个条目需要更多空间（空闲块列表中的**每个条目则包含一个磁盘地址和一个计数**）。

## 文件系统可靠性
### 文件系统备份
- **备份目的**：
  - **文件系统的丢失可能是灾难性的。**
  - **恢复误操作（如回收站）。**
- **备份位置**：三级存储（如磁带）。
- **备份问题**：
  - 是否需要备份整个文件系统？（二进制文件、特殊 I/O 文件通常不备份）
  - 是否需要**备份未修改的文件**？（增量备份：每月完整备份，每日修改文件）
  - 是否需要压缩数据？
  - 如何备份活动的文件系统？（备份期间不允许系统离线）
  - 备份介质的安全性
- 将磁盘转存到磁带上的两种策略：
  - 物理转存：**从块 0 到最后一个块，按顺序写入每个块**
    - 优点：**简单快速**
    - 缺点：不能跳过选定的目录，不能进行增量转存，无法按需恢复单个文件

  - 逻辑转存：**从一个或多个指定目录开始，递归转存所有自给定基准日期以来发生变化的文件和目录**
    - 基准日期可以是最后一次增量转存、最后一次完整转存等
    - 同时转存所有位于修改过的文件或目录路径上的目录（即使未修改）


### 文件系统一致性检查
- **工具程序**：
  - Windows：`scandisk`。
  - Unix：`fsck`。
- **检查内容**：
  - **块检查**：
    - 每个磁盘块必须属于一个文件（或目录），或者在空闲列表中。
    - 构建两个表，分别标记已使用的块和空闲的块。
  - **文件检查**：
    - 使用每个文件的计数器，而不是每个块的计数器。
    - 递归遍历目录树，增加每个文件的计数器。
    - 比较计数器与i-Node中存储的链接计数。
    - 如果链接计数过大或过小，需要修正。

### 文件系统状态
- **一致状态**：所有块都在文件中或在空闲列表中。
- **不一致状态**：
  - 缺失块：将缺失块添加到空闲列表。
  - ==空闲列表中重复的块：修正空闲列表，使块只出现一次==。
  - 一个块属于多个文件：==分配另一个块并通知用户==。
  - 空闲列表中的块同时属于某个文件：==从空闲列表中移除该块==。

## 文件系统性能
- **缓存**：避免磁盘I/O开销。
- **块读取预读**：提高缓冲区缓存命中率。
- **减少磁盘臂移动**：避免寻道开销。

## 示例文件系统
### MS-DOS文件系统
- **目录条目**：
  - 包含文件名、大小、扩展名、属性、保留字段、时间、日期和第一个块号。
- **块大小**：
  - FAT-12：最大分区大小2MB。
  - FAT-16：最大分区大小64MB。
  - FAT-32：最大分区大小2TB。
- **优点**：
  - 支持更大的磁盘。
  - 对于给定大小的磁盘分区，可以使用更小的块大小。

### Windows 98文件系统
- **扩展目录条目**：
  - 包含文件名、大小、属性、创建时间、最后访问时间、最后写入时间、起始块号等。
- **长文件名存储**：
  - 使用多个条目存储长文件名。

### Unix V7文件系统
- **目录条目**：
  - 包含文件名和i-Node号。
  - 文件名最多14个字符。
  - 每个目录条目占用16字节。
- **i-Node结构**：
  - 包含文件属性、直接块地址、单级间接块地址、双级间接块地址和三级间接块地址。
- **文件查找**：
  - 通过路径名逐级查找i-Node。
  - 示例：查找`/usr/ast/mbox`需要多次磁盘读取。

## 总结
- **目录**：存储在数据块中，目录条目包含文件名和i-Node号。
- **文件系统实现**：包括目录、文件和磁盘空间管理。
- **示例文件系统**：MS-DOS、Windows 98和Unix V7。

- 文件系统的设计需要平衡性能、可靠性和空间利用率。
- 目录和文件的实现方式对文件系统的效率和灵活性至关重要。
- 磁盘空间管理是文件系统实现的核心部分。
- 文件系统可靠性需要通过备份和一致性检查来保障。
- 不同的文件系统（如MS-DOS、Windows和Unix）有不同的设计和实现方式。