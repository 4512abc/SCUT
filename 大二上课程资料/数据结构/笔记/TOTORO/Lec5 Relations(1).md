# Lec5 Relations(1)

> 我认为这一章是最难的，图论和树论那里都很简单，一开始的逻辑那里其实感觉比较多。
>
> 就把你放到最后解决好了，关系！😎

##  **反射性 (Reflexive) 关系的定义与判定**

---

### **1. 反射性定义**
在集合 $ A $ 上，一个关系 $ R $ 被称为 **反射性关系**，当且仅当：
$
(a, a) \in R \quad \text{对于每一个 } a \in A。
$
即，集合中的每个元素都与自身成对出现在关系中。

---

### **2. 示例分析**
设集合 $ A = \{1, 2, 3, 4\} $，我们逐一分析给定的关系 $ R1, R2, R3 $ 是否具有反射性：

#### **2.1 $ R1 $**
$
R1 = \{(1,1), (1,2), (2,1), (2,2), (3,4), (4,1), (4,4)\}
$
- **分析**：集合 $ A $ 中每个元素 $ a $ 的 $ (a, a) $ 是否都在 $ R1 $ 中：
  - $ (1,1) \in R1 $, $ (2,2) \in R1 $, $ (4,4) \in R1 $
  - 但 $ (3,3) \notin R1 $，因此 $ R1 $ **不具备反射性**。

---

#### **2.2 $ R2 $**
$
R2 = \{(1,1), (1,2), (2,1)\}
$
- **分析**：检查 $ (a, a) $ 是否都在 $ R2 $ 中：
  - $ (1,1) \in R2 $，但 $ (2,2) \notin R2, (3,3) \notin R2, (4,4) \notin R2 $。
  - 因此 $ R2 $ **不具备反射性**。

---

#### **2.3 $ R3 $**
$
R3 = \{(1,1), (1,2), (1,4), (2,1), (2,2), (3,3), (4,1), (4,4)\}
$
- **分析**：检查 $ (a, a) $ 是否都在 $ R3 $ 中：
  - $ (1,1) \in R3, (2,2) \in R3, (3,3) \in R3, (4,4) \in R3 $。
  - 因此 $ R3 $ **具备反射性**。

---

### **3. 另一组关系判定**

#### **关系定义：**
1. $ R1 = \{(a, b) \mid a \leq b\} $
2. $ R2 = \{(a, b) \mid a > b\} $
3. $ R3 = \{(a, b) \mid a = b \text{ 或 } a = -b\} $
4. $ R4 = \{(a, b) \mid a = b\} $
5. $ R5 = \{(a, b) \mid a = b + 1\} $
6. $ R6 = \{(a, b) \mid a + b \leq 3\} $

#### **分析：**

1. $ R1 $：
   - $ a \leq a $ 对任意 $ a $ 都成立，因此 $ R1 $ **具备反射性**。
2. $ R2 $：
   - $ a > a $ 不可能成立，因此 $ R2 $ **不具备反射性**。
3. $ R3 $：
   - $ a = a $ 成立，且 $ a = -a $ 对部分 $ a = 0 $ 成立，因此 $ R3 $ **具备反射性**。
4. $ R4 $：
   - $ a = a $ 对任意 $ a $ 都成立，因此 $ R4 $ **具备反射性**。
5. $ R5 $：
   - $ a = b + 1 $ 不可能对 $ a = b $ 成立，因此 $ R5 $ **不具备反射性**。
6. $ R6 $：
   - $ a + a \leq 3 $ 并非对所有 $ a $ 成立（如 $ a = 2 $ 时 $ 4 > 3 $），因此 $ R6 $ **不具备反射性**。

---

### **4. 总结**

| 关系 | 是否反射性  | 理由                                   |
|------|-----------|------------------------------------|
| $ R1 $ | 是        | $ a \leq a $ 恒成立                     |
| $ R2 $ | 否        | $ a > a $ 不成立                       |
| $ R3 $ | 是        | $ a = a $ 或 $ a = -a $（当 $ a = 0 $）成立 |
| $ R4 $ | 是        | $ a = a $ 恒成立                       |
| $ R5 $ | 否        | $ a = b + 1 $ 不成立                   |
| $ R6 $ | 否        | $ a + a \leq 3 $ 不对所有 $ a $ 成立     |

### **反射性 (Reflexive) 与非反射性 (Irreflexive)对比**

---

#### **1. 反射性 (Reflexive)**

##### **定义：**
对于一个集合 $ A $ 上的关系 $ R $，如果对于 $ A $ 中的每一个元素 $ a $，都有：
$
a R a \quad (\forall a \in A, (a, a) \in R)
$
那么称 $ R $ 是 **反射性关系**。

##### **举例：**
1. **大于等于 (≥)**：
   - $ \{(a, b) \mid a \geq b\} $ 是反射性的，因为 $ a \geq a $ 对所有 $ a $ 成立。
2. **整除 (divides)**：
   - $ \{(a, b) \mid a \text{ divides } b\} $ 是反射性的，因为 $ a \mid a $ 对所有 $ a $ 成立。
3. **等价关系 (=)**：
   - $ \{(a, b) \mid a = b\} $ 是反射性的，因为 $ a = a $ 对所有 $ a $ 成立。

---

#### **2. 非反射性 (Irreflexive)**

##### **定义：**
对于一个集合 $ A $ 上的关系 $ R $，如果对于 $ A $ 中的每一个元素 $ a $，都有：
$
\neg(a R a) \quad (\forall a \in A, (a, a) \notin R)
$
那么称 $ R $ 是 **非反射性关系**。

##### **注意：**
- **非反射性 (Irreflexive)** ≠ **非反射的 (Not Reflexive)**：
  - 非反射的：表示 $ R $ 并不满足 $ \forall a \in A, (a, a) \in R $ 的条件，但可能某些元素满足。
  - 非反射性：表示 $ R $ 对所有元素 $ a $ 都不满足 $ a R a $。

##### **举例：**
1. **小于 (<)**：
   - $ \{(a, b) \mid a < b\} $ 是非反射性的，因为 $ a < a $ 永远不成立。
2. **大于 (>)**：
   - $ \{(a, b) \mid a > b\} $ 是非反射性的，因为 $ a > a $ 永远不成立。
3. **真包含 ($ \subset $)**：
   - $ \{(A, B) \mid A \subset B\} $ 是非反射性的，因为 $ A \subset A $ 不成立。

---

#### **3. 反射性与非反射性互补关系**

##### **定理：**
如果关系 $ R $ 是非反射性的，那么其补关系 $ \overline{R} $ 是反射性的。
- **补关系定义**：对于集合 $ A $ 上的关系 $ R $，其补关系 $ \overline{R} $ 定义为：
  $
  \overline{R} = \{(a, b) \mid (a, b) \notin R\}
  $

##### **例子：**
- 小于 (<) 是非反射性的，其补关系大于等于 (≥) 是反射性的。
- 真包含 ($ \subset $) 是非反射性的，其补关系包含 ($ \subseteq $) 是反射性的。

##### **证明：**
1. 如果 $ R $ 是非反射性的，则 $ (a, a) \notin R $ 对所有 $ a \in A $ 成立。
2. 因此 $ (a, a) \in \overline{R} $，即 $ \overline{R} $ 是反射性的。

---

#### **4. 示例：反射性与非反射性关系**

| 类型           | 示例关系                                  |
|----------------|-----------------------------------------|
| **反射性关系**  | $ =, \leq, \geq, \subseteq, \iff $       |
| **非反射性关系** | $ <, >, \neq, \subset $                 |

---

#### **5. 应用场景举例**

1. **数字上的关系**：
   - 反射性：等于 (=)，大于等于 (≥)，小于等于 (≤)。
   - 非反射性：大于 (>)，小于 (<)。

2. **集合上的关系**：
   - 反射性：包含 ($ \subseteq $)。
   - 非反射性：真包含 ($ \subset $)。

3. **逻辑关系**：
   - 反射性：逻辑等价 ($ \iff $)。
   - 非反射性：逻辑不等价 ($ \not\iff $)。

## **对称性 (Symmetric)、反对称性 (Antisymmetric)、传递性 (Transitivity) 关系**

---

### **1. 对称性 (Symmetric)**

#### **定义：**
对于一个集合 $ A $ 上的关系 $ R $，如果对于所有 $ a, b \in A $，当 $ (a, b) \in R $ 时，必有 $ (b, a) \in R $，则称 $ R $ 是 **对称性关系**。
$
\forall a, b \in A, (a, b) \in R \implies (b, a) \in R
$

#### **举例：**
1. **等价关系 (=)**：
   - $ (a, b) \in R $ 意味着 $ a = b $，显然对称。
2. **相反数关系**：
   - $ R = \{(a, b) \mid a = -b\} $ 是对称的，因为如果 $ a = -b $，则 $ b = -a $。
3. **R2 和 R3**：
   - $ R2 = \{(1,1), (1,2), (2,1)\} $，因为 $ (1,2) \in R2 \implies (2,1) \in R2 $。
   - $ R3 = \{(1,1), (1,2), (1,4), (2,1), (2,2), (3,3), (4,1), (4,4)\} $，对称性同样成立。

#### **非对称性示例：**
1. **小于关系 (<)**：
   - $ R = \{(a, b) \mid a < b\} $ 不对称，因为 $ a < b $ 不意味着 $ b < a $。

---

### **2. 反对称性 (Antisymmetric)**

#### **定义：**
对于一个集合 $ A $ 上的关系 $ R $，如果对于所有 $ a, b \in A $，当 $ (a, b) \in R $ 且 $ (b, a) \in R $ 时，必有 $ a = b $，则称 $ R $ 是 **反对称性关系**。
$
\forall a, b \in A, (a, b) \in R \land (b, a) \in R \implies a = b
$

#### **常见关系：**
- **$ \leq, \geq, \subseteq $** 都是反对称的。
  - 如果 $ a \leq b $ 且 $ b \leq a $，则 $ a = b $。
  - 如果 $ A \subseteq B $ 且 $ B \subseteq A $，则 $ A = B $。

#### **举例：**
1. **R4**：
   - $ R4 = \{(2,1), (3,1), (3,2), (4,1), (4,2), (4,3)\} $ 是反对称的，因为不存在 $ (a, b) \in R4 $ 且 $ (b, a) \in R4 $ 的情况。
2. **整除关系 (divides)**：
   - $ R = \{(a, b) \mid a \mid b\} $ 是反对称的，因为如果 $ a \mid b $ 且 $ b \mid a $，则 $ a = b $。

---

### **3. 对称性与反对称性的关系**

- **对称性**和**反对称性**可以同时存在，例如 $ R = \{(a, b) \mid a = b\} $，即等于关系 $ = $。
- **对称性**和**反对称性**可以互斥，例如小于关系 $ < $ 是反对称但不是对称的。

---

### **4. 传递性 (Transitivity)**

#### **定义：**
对于一个集合 $ A $ 上的关系 $ R $，如果对于所有 $ a, b, c \in A $，当 $ (a, b) \in R $ 且 $ (b, c) \in R $ 时，必有 $ (a, c) \in R $，则称 $ R $ 是 **传递性关系**。
$
\forall a, b, c \in A, (a, b) \in R \land (b, c) \in R \implies (a, c) \in R
$

#### **常见传递性关系：**
1. **小于关系 (<)**：
   - 如果 $ a < b $ 且 $ b < c $，则 $ a < c $。
2. **包含关系 ($ \subseteq $)**：
   - 如果 $ A \subseteq B $ 且 $ B \subseteq C $，则 $ A \subseteq C $。

#### **非传递性示例：**
1. **“朋友”关系**：
   - 如果 $ A $ 和 $ B $ 是朋友，且 $ B $ 和 $ C $ 是朋友，不能推断 $ A $ 和 $ C $ 是朋友。

---

### **5. 谓词逻辑表达**

#### **对称性：**
$
\forall a, b \in A, (a, b) \in R \implies (b, a) \in R
$

#### **反对称性：**
$
\forall a, b \in A, (a, b) \in R \land (b, a) \in R \implies a = b
$

#### **传递性：**
$
\forall a, b, c \in A, (a, b) \in R \land (b, c) \in R \implies (a, c) \in R
$

---

### **6. 示例比较**

| 关系类型     | 示例关系                       | 是否对称 | 是否反对称 | 是否传递 |
|--------------|-------------------------------|----------|------------|----------|
| 等于 $ = $  | $ \{(a, b) \mid a = b\} $    | 是       | 是         | 是       |
| 小于 $ < $  | $ \{(a, b) \mid a < b\} $    | 否       | 是         | 是       |
| 包含 $ \subseteq $ | $ \{(A, B) \mid A \subseteq B\} $ | 否       | 是         | 是       |
| 朋友关系      | $ \{(A, B) \mid A \text{是} B \text{的朋友}\} $ | 是       | 否         | 否       |

---

### **关系的传递性（Transitivity）、非传递性（Nontransitivity）、非传递性严格形式（Intransitivity）**

---

#### **1. 传递性 (Transitivity)**

##### **定义：**
一个关系 $ R $ 是 **传递的**，如果对于任意的 $ a, b, c $，当 $ (a, b) \in R $ 且 $ (b, c) \in R $ 时，必有 $ (a, c) \in R $：
$
\forall a, b, c, \ ((a, b) \in R \land (b, c) \in R) \implies (a, c) \in R
$

##### **举例：**
- **祖先关系 ("x is an ancestor of y")**：
  - 如果 $ A $ 是 $ B $ 的祖先，且 $ B $ 是 $ C $ 的祖先，则 $ A $ 必定是 $ C $ 的祖先，传递性成立。
- **强于关系 ("x is stronger than y")**：
  - 如果 $ A $ 比 $ B $ 强，且 $ B $ 比 $ C $ 强，则 $ A $ 必定比 $ C $ 强，传递性成立。

---

#### **2. 非传递性 (Nontransitivity)**

##### **定义：**
一个关系 $ R $ 是 **非传递的**，如果它不满足传递性。换句话说，对于 $ R $ 存在 $ a, b, c $，使得 $ (a, b) \in R $ 和 $ (b, c) \in R $，但 $ (a, c) \notin R $。

##### **举例：**
- **喜欢关系 ("x likes y")**：
  - 如果 $ A $ 喜欢 $ B $，且 $ B $ 喜欢 $ C $，并不能推出 $ A $ 喜欢 $ C $，非传递性成立。
- **在1英里范围内 ("x is located within 1 mile of y")**：
  - 如果 $ A $ 在 $ B $ 1英里范围内，且 $ B $ 在 $ C $ 1英里范围内，并不能保证 $ A $ 在 $ C $ 1英里范围内，非传递性成立。

---

#### **3. 严格非传递性 (Intransitivity)**

##### **定义：**
一个关系 $ R $ 是 **严格非传递的**，如果对于任意的 $ a, b, c $，当 $ (a, b) \in R $ 且 $ (b, c) \in R $ 时，$ (a, c) \notin R $：
$
\forall a, b, c, \ ((a, b) \in R \land (b, c) \in R) \implies \neg(a, c) \in R
$

##### **举例：**
- **递增关系 ("x + 1 = y")**：
  - 如果 $ A + 1 = B $，且 $ B + 1 = C $，则 $ A + 1 \neq C $，严格非传递性成立。

---

#### **4. 示例分类与分析**

| **关系**                        | **传递性** | **非传递性** | **严格非传递性** |
|---------------------------------|------------|--------------|-----------------|
| **祖先关系 ("x is an ancestor of y")** | 是         | 否           | 否              |
| **喜欢关系 ("x likes y")**       | 否         | 是           | 否              |
| **1英里范围 ("x is located within 1 mile of y")** | 否         | 是           | 否              |
| **递增关系 ("x + 1 = y")**        | 否         | 否           | 是              |
| **比赛胜利 ("x beat y in the tournament")** | 否         | 是           | 否              |
| **强于关系 ("x is stronger than y")** | 是         | 否           | 否              |

---

#### **5. 谓词逻辑表示**

1. **传递性：**
   $
   \forall a, b, c, \ ((a, b) \in R \land (b, c) \in R) \implies (a, c) \in R
   $

2. **非传递性：**
   $
   \exists a, b, c, \ ((a, b) \in R \land (b, c) \in R \land (a, c) \notin R)
   $

3. **严格非传递性：**
   $
   \forall a, b, c, \ ((a, b) \in R \land (b, c) \in R) \implies \neg(a, c) \in R
   $

## **关系的复合（Composition of Relations）**

---

### **1. 关系的复合定义**

给定两个关系 $ R \subseteq A \times B $ 和 $ S \subseteq B \times C $，定义关系 $ S \circ R $（读作“$ S $ 与 $ R $ 的复合”）为：

$
S \circ R = \{ (a, c) \mid \exists b \in B, \ (a, b) \in R \land (b, c) \in S \}
$

---

### **2. 关系复合与函数复合的关系**

- 关系复合是函数复合的推广。
- 如果 $ R $ 和 $ S $ 是函数（即对于任意输入有唯一输出），则关系复合 $ S \circ R $ 退化为函数复合：
  $
  S \circ R(a, c) \iff \exists b, \ aRb \land bSc
  $
  可以表示为：
  $
  c = S(R(a))
  $

#### **示例：**
1. **函数复合：**
   - 假设 $ R(a) = b $，$ S(b) = c $，则 $ S \circ R(a) = c $。
   - 等价于函数形式的逐步计算：先通过 $ R $ 找到中间值 $ b $，再用 $ S $ 计算最终结果 $ c $。

2. **关系复合：**
   - 如果 $ R $ 和 $ S $ 并非函数，可能存在多个 $ b $ 满足条件，因此 $ (a, c) $ 可以对应多个值。

---

### **3. 关系复合的运算示例**

#### **输入关系：**

1. **关系 $ R $：**
   $
   R = \{ (1,1), (1,4), (2,3), (3,1), (3,4) \}
   $

2. **关系 $ S $：**
   $
   S = \{ (1,0), (2,0), (3,1), (3,2), (4,1) \}
   $

#### **计算复合关系 $ S \circ R $：**
根据定义：
$
S \circ R = \{ (a, c) \mid \exists b, (a, b) \in R \land (b, c) \in S \}
$

逐步分析：
- $ (1,1) \in R $，且 $ (1,0) \in S $，因此 $ (1,0) \in S \circ R $。
- $ (1,4) \in R $，且 $ (4,1) \in S $，因此 $ (1,1) \in S \circ R $。
- $ (2,3) \in R $，且 $ (3,1) \in S $，因此 $ (2,1) \in S \circ R $。
- 继续此过程，得到：
  $
  S \circ R = \{ (1,0), (1,1), (2,1), (2,2), (3,0), (3,1) \}
  $

---

### **4. 关系的幂运算**

#### **定义：**
对于关系 $ R \subseteq A \times A $，其幂 $ R^n $ 表示 $ R $ 自身与自身复合 $ n $ 次：
$
R^n = R \circ R \circ \cdots \circ R \ (\text{共 } n \text{ 次})
$

#### **示例：**
1. **输入关系 $ R $：**
   $
   R = \{ (1,1), (2,1), (3,2), (4,3) \}
   $

2. **计算 $ R^2 $：**
   $
   R^2 = R \circ R = \{ (a, c) \mid \exists b, (a, b) \in R \land (b, c) \in R \}
   $
   得到：
   $
   R^2 = \{ (1,1), (2,1), (3,1), (4,2) \}
   $

3. **计算 $ R^3 $：**
   $
   R^3 = R^2 \circ R
   $
   结果为：
   $
   R^3 = \{ (1,1), (2,1), (3,1), (4,1) \}
   $

4. **计算 $ R^n $（$ n \geq 3 $）：**
   - 由于 $ R^3 = R^4 = R^n = \{ (1,1), (2,1), (3,1), (4,1) \} $，从 $ n \geq 3 $ 开始，结果稳定。

---

### **5. 总结与关键点**

1. **关系复合的核心：**
   - 通过中间集合 $ B $ 将集合 $ A $ 和 $ C $ 关联起来。
   - 存在中间值 $ b $，满足 $ aRb $ 且 $ bSc $，则 $ (a, c) \in S \circ R $。

2. **关系复合的幂：**
   - 关系自身的复合可逐步迭代，最终可能收敛到一个稳定集合。

3. **函数复合的特殊性：**
   - 函数是关系的特例，具有确定性和唯一性。
   - 函数复合是关系复合的一个限制形式。



## 一些习题

![image-20241121145232765](C:\Totoro.trip\blog-demo\source\images\image-20241121145232765.png)

![image-20241121145258698](C:\Totoro.trip\blog-demo\source\images\image-20241121145258698.png)

![image-20241121145310455](C:\Totoro.trip\blog-demo\source\images\image-20241121145310455.png)

![image-20241121145652213](C:\Totoro.trip\blog-demo\source\images\image-20241121145652213.png)
两个具有传递性的二元关系的复合**不一定**具有传递性。

### **反例**：

设 $ R_1 $ 和 $ R_2 $ 为两个传递的二元关系：

- $ R_1 = \{(1, 2), (3, 4)\} $
- $ R_2 = \{(2, 3), (4, 5)\} $

**求复合关系 $ R = R_1 \circ R_2 $**：

关系复合的定义是：$ (a, c) \in R_1 \circ R_2 $ 当且仅当存在一个元素 $ b $，使得 $ (a, b) \in R_1 $ 且 $ (b, c) \in R_2 $。

我们可以通过分析来得到 $ R = R_1 \circ R_2 $：

1. 对于 $ (1, 2) \in R_1 $ 和 $ (2, 3) \in R_2 $，有 $ (1, 3) \in R $。
2. 对于 $ (3, 4) \in R_1 $ 和 $ (4, 5) \in R_2 $，有 $ (3, 5) \in R $。

因此，复合关系 $ R $ 为：
$
R = R_1 \circ R_2 = \{(1, 3), (3, 5)\}
$

**检查传递性**：

我们检查是否满足传递性：对于任意 $ (a, b) $ 和 $ (b, c) $ 在 $ R $ 中，是否存在 $ (a, c) $ 也在 $ R $ 中。

- $ (1, 3) \in R $ 和 $ (3, 5) \in R $，根据传递性，应当有 $ (1, 5) \in R $，但 $ (1, 5) $ 并不在 $ R $ 中。

因此，复合关系 $ R $ 并不具有传递性。

