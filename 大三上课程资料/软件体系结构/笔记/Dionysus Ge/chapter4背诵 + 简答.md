# Chapter 4: Understanding Quality Attributes

“系统需求分为功能、质量属性与约束三类：功能通过职责集满足；质量属性通过架构结构与行为满足；约束是已做出的设计决策。质量属性需求用质量属性场景表达，包含刺激源、刺激、环境、受刺激构件、响应与可度量的响应度量。为实现质量属性，架构师使用战术（影响单一质量属性响应的设计决策），模式可视为战术打包；架构设计决策可归纳为七类：职责分配、协调模型、数据模型、资源管理、映射、绑定时机与技术选型。”

## A. 本章所有必背定义（≥15个）

> 格式：术语(EN) — 一句话定义 — 关键点2条 — 常见误区1条

1. **Functional requirement** — 描述系统必须做什么/如何对运行时刺激做出行为反应的需求。

- 关键点：落在“职责/功能点”。
- 关键点：满足方式=设计中包含合适职责集合。
- 误区：把性能/可用性也当作功能需求写进“做什么”。

1. **Quality attribute requirement** — 对功能需求进行“限定/注释（qualify/annotate）”的需求。

- 关键点：限定“多快、多可靠、多易用”等。
- 关键点：满足方式=通过架构结构与行为。
- 误区：只写“高性能/高可用”，不写可检验条件。

1. **QA annotation** — 附着在某条功能需求上的质量限定说明（例如按多快出现对话框）。

- 关键点：同一功能可被性能/可用性/易用性等多种 QA 注释。
- 关键点：帮助把“质量”落到具体功能点上。
- 误区：把“QA 注释”当作实现细节。

1. **Constraint** — 已经被做出的设计决策（自由度为 0）的需求。

- 关键点：来源可来自法规、平台、既有系统、合同等。
- 关键点：直接限制后续设计空间。
- 误区：把“我们偏好某技术”写成 constraint（偏好≠已定）。

1. **Degree of freedom (0 DOF)** — 在某决策上可选择的余地；constraint 的自由度为 0。

- 关键点：自由度越小，架构可选结构越少。
- 关键点：考试写“已为你做出决策”。
- 误区：以为 constraint 就是“限制开发者”。

1. **Functionality** — 系统完成其预期工作的能力。

- 关键点：仅给定功能，可能存在无穷多种可满足它的架构。
- 关键点：功能与质量属性是正交的（orthogonal）。
- 误区：以为“功能决定架构”。

1. **Orthogonal (functionality vs QA)** — 功能与质量属性相互独立维度，不可互相推出。

- 关键点：同样功能可用不同架构实现不同 QA。
- 关键点：QA 往往才是架构“必须这样分解”的根因。
- 误区：把 orthogonal 理解成“互不影响”。

1. **Problem: Untestable definitions** — 仅说“系统可修改/高可用”是不可测试、无操作意义的。

- 关键点：缺“触发条件+度量”。
- 关键点：导致需求争论空转。
- 误区：把形容词当需求。

1. **Quality attribute scenario** — 用统一场景模板描述质量属性需求，使其可讨论、可权衡、可测试。

- 关键点：解决“不可测试、归类争论”的问题。
- 关键点：六要素必须齐全。
- 误区：只写“响应”，不写“环境/度量”。

1. **Stimulus source** — 产生刺激的实体（人/系统/执行器等）。

- 关键点：回答“谁触发”。
- 关键点：常见写法：用户/外部系统/攻击者/定时器。
- 误区：把 stimulus source 写成 stimulus 本身。

1. **Stimulus** — 到达系统并要求响应的条件/事件。

- 关键点：回答“发生了什么”。
- 关键点：可为请求、故障、负载突增、攻击等。
- 误区：写成系统内部动作（如“系统开始处理”）而非触发条件。

1. **Environment** — 刺激发生时系统所处的条件（正常/过载/降级/维护等）。

- 关键点：决定响应目标是否变化。
- 关键点：同一系统可有多种“正常”模式。
- 误区：不写环境导致需求不可判定。

1. **Artifact** — 被刺激的对象（系统整体、子系统、组件集合等）。

- 关键点：回答“作用在哪”。
- 关键点：便于定位架构设计/测试范围。
- 误区：artifact 写成“用户界面”（那通常是触发者或观察者）。

1. **Response** — 系统对刺激到来的活动/行为。

- 关键点：回答“系统做什么”。
- 关键点：可包括检测、隔离、恢复、拒绝服务、记录等。
- 误区：只写“系统响应”，没有具体动作。

1. **Response measure** — 可度量的响应度量，用于测试是否满足需求。

- 关键点：ms/吞吐/可用性百分比/MTTR/正确率等。
- 关键点：这是 QA scenario 变“可验收”的关键。
- 误区：写“尽可能快/尽量高”。

1. **General QA scenario** — 与具体系统无关、可适用于任意系统的通用场景。

- 关键点：用于早期讨论、评估、检查遗漏。
- 关键点：可作为“题库模板”。
- 误区：把 general scenario 当成最终需求。

1. **Concrete QA scenario** — 针对当前系统定制、可直接验收的具体场景。

- 关键点：给出具体刺激、环境、度量。
- 关键点：是最终 QA 需求写法。
- 误区：只把 general scenario 换个名。

1. **Architectural tactic** — 影响某一质量属性响应的设计决策（设计原语），聚焦单一质量响应。

- 关键点：可组合，且有副作用（tradeoff）。
- 关键点：常用于“增强/改造模式”以达成目标。
- 误区：把 tactic 当“局部代码优化”。

1. **Architectural pattern** — 可复用的一揽子设计决策/约束；可视为 tactics 的打包。

- 关键点：pattern 往往复杂，需要 tactic 增强以满足特定质量目标。
- 关键点：pattern 更偏“类架构/结构解法”。
- 误区：把 pattern 当“框架/库”。

1. **Seven categories of architectural design decisions** — 架构设计决策的七类分类框架。

- 关键点：答题时按七类“列举+各一句解释”就很稳。
- 关键点：技术选型是其中一类，而不是“实现末端”。
- 误区：背不全、顺序混乱。

（如果你希望我把“七类决策”每一类再拆成“可直接抄的两句解释”，我可以按 Slide 15–20 那一段的原 bullet 给你做成“背诵卡”。）

------

## B. 10个对比题答案（含你点名的4个）

### 1) structure vs view

- **结构（structure）**：系统中的元素及其关系“本体”。
- **视图（view）**：对一个或多个结构的**表示/文档化呈现**，面向干系人阅读与使用。
- **一锤定音句**：*Architects design structures; they document views.*

### 2) module vs component

- **模块（module）**：实现单位/代码或数据单元，强调构造与责任分配；较少强调运行时。
- **组件（component）**：运行时有行为的执行实体；与连接件一起构成运行时交互结构。
- **考试加分句**：模块与组件**不要求一一对应**。

### 3) layer vs tier

- **Layer（分层，通常是模块级）**：layered pattern 把软件分为“层”，每层是模块分组，提供内聚服务，并遵守**单向使用规则**。
- **Tier（分区/多层部署，通常是执行结构/部署级）**：multi-tier 把执行结构划分为若干**逻辑组件分组**，每组称为 tier，可映射到计算平台。
- **一句话**：Layer 偏“软件模块组织与可演化”，Tier 偏“分布式执行结构分组与部署”。

### 4) pattern vs tactic

- **Tactic**：影响某一质量属性响应的设计决策，聚焦单一 QA 响应。
- **Pattern**：可复用的一揽子设计决策；可看作 tactics 的打包。
- **考试句式**：“pattern 往往复杂且需结合 tactics 增强以满足特定系统的 QA 目标。”

### 5) functional requirement vs quality attribute requirement

- **功能需求**：写“做什么/行为是什么”。
- **质量属性需求**：写“做得多好/在什么条件下达到什么度量”。
- **考试踩坑**：把“快/稳/安全”当作功能需求。

### 6) quality attribute requirement vs constraint

- **QA 需求**：你还能选择结构与战术去满足；本质是目标。
- **约束**：决策已定（0 自由度），本质是边界/限制。
- **一锤定音**：QA 需求是“要达到什么”，约束是“你不能怎么做”。

### 7) general scenario vs concrete scenario

- **General**：系统无关、可普遍适用，用于早期分析与检查遗漏。
- **Concrete**：系统特定、可直接验收/测试。
- **卷面写法**：最终需求必须落到 concrete（含度量）。

### 8) stimulus source vs stimulus

- **Source**：谁/什么产生刺激（人、系统、执行器）。
- **Stimulus**：发生了什么需要响应的事件/条件。
- **区分法**：source=主语；stimulus=谓语宾语（事件）。

### 9) response vs response measure

- **Response**：系统做了什么动作。
- **Response measure**：这个动作“好到什么程度”的可测指标。
- **高分句**：没有 response measure 的 QA 需求不可测试。

### 10) coordination model vs data model（两类架构决策对比）

- **Coordination model**：关注运行时元素如何协同、通信机制与性质（同步/异步等）。
- **Data model**：关注主要数据抽象、数据组织/持久化方式（关系库、对象集合等）。
- **一句话**：coordination 看“怎么交互”，data 看“怎么表示与存储”。

------

## C. 6道简答题标准答案（完全应试写法）

### 1）系统需求分哪三类？分别如何满足？

- 系统需求分为**功能需求、质量属性需求、约束**三类。
- 功能需求通过在设计中包含恰当的**职责集合**来满足。
- 质量属性需求通过体系结构的**结构与行为**来满足。
- 约束是**已做出的设计决策**，对架构师而言自由度为 0，会直接限制可选方案空间。

### 2）为什么仅用“高可用/高可修改”描述质量属性不行？本章给出的解决方案是什么？

- 仅用形容词定义质量属性往往**不可测试**，并会引发关于“某问题属于哪个质量属性”的争论，同时不同属性社区存在不同术语体系。
- 解决方案：用**质量属性场景（quality attribute scenario）**统一刻画质量属性需求，使其可讨论、可权衡并可测试。

### 3）什么是质量属性场景？包含哪六部分？

- 质量属性场景是用于表达质量属性需求的标准化场景模板。
- 六部分：**刺激源、刺激、环境、受刺激构件、响应、响应度量**（Source, Stimulus, Environment, Artifact, Response, Response measure）。

### 4）什么是架构战术（tactic）？它与模式（pattern）关系是什么？

- 架构战术是**影响某一质量属性响应的设计决策**，聚焦单一质量属性响应。
- 架构模式可视为一组可复用设计决策/战术的**打包**；实践中常用战术对模式进行增强以满足特定系统质量目标。

### 5）架构设计决策可分哪七类？（列举即可）

- 七类：职责分配、协调模型、数据模型、资源管理、架构元素映射、绑定时机、技术选型。

### 6）什么是技术选型决策？需要考虑哪些方面？

- 技术选型决策属于架构设计决策类别之一，用于确定支撑其他决策的技术基础，并评估其带来的约束与影响。
- 需考虑：可用技术范围、工具链充分性、团队熟悉度与外部支持、技术副作用（对协调模型/资源管理等的影响）、与现有技术栈兼容性。

