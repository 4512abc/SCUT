# 第16章（Architecture and Requirements）

# A. 必背定义（≥15，这里给你 22 条）

> 记忆法：**“ASR主线 + QAW场景线 + 业务目标/PALM线 + Utility Tree收口线”**。

1. **Architecturally Significant Requirement (ASR)**

- 定义：对软件架构有**深刻影响**（profound impact）的需求。
- 关键点：①加入/删除会导致不同架构；②通常具备高业务/使命价值。
- 易错点：把“重要需求=ASR”，但**不影响架构结构**的不算。

1. **Quality Attribute (QA)**

- 定义：描述系统“如何好”（性能、可用性、安全、可修改性等）的属性类别。
- 关键点：①单写“高性能/高可用”通常不可用；②需要场景化落地。
- 易错点：把QA当成“功能”。

1. **Architectural Driver**

- 定义：驱动架构关键决策的输入集合（通常来自关键功能、质量属性、约束、业务目标）。
- 关键点：①来自干系人/业务/约束；②用于解释设计取舍（rationale）。
- 易错点：把普通需求都叫driver。

1. **Stakeholder (干系人)**

- 定义：对系统有关注点、影响或受影响的个人/组织。
- 关键点：①不同干系人关注点不同；②必须参与优先级化。
- 易错点：只找客户/产品，不找运维、安全、法务等关键角色。

1. **Stakeholder Interview（干系人访谈）**

- 定义：通过访谈获取ASR候选与架构驱动，并形成**可排序的QA场景**集合。
- 关键点：①别逼“拍脑袋数字”；②输出要能指导原型/顺序/决策。
- 易错点：把访谈当聊天，不产出场景与排序。

1. **Quality Attribute Workshop (QAW)**

- 定义：主持人引导的干系人工作坊，在架构完成前**生成、排序、细化**质量属性场景。
- 关键点：①系统级关注点；②产出“被排序的QA场景”。
- 易错点：把QAW写成“评估架构”（QAW更偏获取/细化）。

1. **Scenario Brainstorming（场景头脑风暴）**

- 定义：QAW中由每位干系人提出场景候选，保证每个驱动都有代表场景。
- 关键点：①主持人确保 stimulus/response 明确；②覆盖驱动。
- 易错点：提“口号”而不是场景。

1. **Scenario Consolidation（场景合并）**

- 定义：合并相似场景，避免重复导致投票分散。
- 关键点：①去重；②保持语义不丢。
- 易错点：合并过度导致丢关键差异。

1. **Scenario Prioritization（场景排序/投票）**

- 定义：QAW中用投票对场景进行优先级化；每人票数=场景总数的 **30%**。
- 关键点：①群体排序；②得到Top场景进入细化。
- 易错点：架构师拍板代替干系人投票。

1. **Scenario Refinement（场景细化）**

- 定义：把Top场景细化为六段式，补齐可验证信息。
- 关键点：①补环境、对象与度量；②变成架构输入。
- 易错点：只细化“描述”，不补“响应度量”。

1. **Six-part QA Scenario（六段式质量属性场景）**

- 定义：**source–stimulus–artifact–environment–response–response measure**。
- 关键点：①response measure=可测量指标；②用于验证/评估。
- 易错点：漏掉 response measure。

1. **Business Goal（业务目标）**

- 定义：系统/组织希望达成的业务层结果，是ASR的重要上游来源。
- 关键点：①能反推QA/约束；②常不在需求文档里。
- 易错点：把业务目标当成“功能列表”。

1. **Business Goal Scenario（业务目标场景）**

- 定义：用结构化模板表达业务目标以便比较、排序、追踪。
- 关键点：①7要素；②必须含可测试的 goal-measure（常含时间）。
- 易错点：只写goal不写measure。

1. **Goal-source / Goal-subject / Goal-object**

- 定义：source=谁提供目标；subject=拥有目标的人/组织；object=目标作用对象。
- 易错点：subject/object写反。

1. **Environment（业务目标场景环境）**

- 定义：目标成立的上下文（可含社会/法律/竞争/技术等）。
- 易错点：忽略环境导致目标不可解释。

1. **Goal-measure**

- 定义：判断业务目标是否达成的**可测试度量**，通常含时间因素。
- 易错点：把“信心/价值”当度量。

1. **Pedigree (可信度/血统)**

- 定义：对目标或质量属性驱动的“信心与依据来源”的说明。
- 关键点：①追溯定量要求来源；②避免随意数字。
- 易错点：把pedigree当成“优先级”。

1. **Value / Volatility（价值/波动性）**

- 定义：目标价值大小与未来变化可能性。
- 易错点：只看价值不看波动性，导致后续返工。

1. **PALM**

- 定义：一天半左右的七步工作坊方法，用于获取并结构化业务目标场景，并把它们映射到QA与驱动。
- 易错点：把PALM当QAW（主产物不同）。

1. **Finding（PALM中的发现项/缺口）**

- 定义：PALM中识别出的“缺失或不匹配”的重要信息（如潜在QA未成为需求、现有QA驱动支撑不了业务目标）。
- 易错点：把finding当“需求列表”，其实是“问题/缺口清单”。

1. **Utility Tree（效用树）**

- 定义：集中记录ASR并按“架构影响×业务价值”优先级化的结构化表示；根是Utility，下层是QA类别与细化项，叶子挂场景。
- 易错点：把它当“只画QA分类”，不挂场景不排序。

1. **Marching Orders（行军命令）**

- 定义：经过捕获与排序后的ASR集合，作为架构师后续设计/原型/评估的执行指令。
- 易错点：没有排序就谈“指导架构”，会失焦。

------

# B. 10 个对比题标准答案（直接背）

1. **ASR vs 普通Requirement**

- ASR：对架构有深刻影响 + 高业务价值；加入/删除会改架构。
- 普通需求：多为局部功能/细节，对整体结构影响有限。
- 结论：架构设计优先围绕ASR展开。

1. **QA（质量属性）vs QA Scenario（质量属性场景）**

- QA：类别名（性能/可用性…）。
- QA Scenario：具体可验证表达（六段式含response measure）。
- 结论：架构输入应尽量用场景，而不是口号QA。

1. **QAW vs PALM**

- QAW：生成/排序/细化**质量属性场景**（架构完成前）。
- PALM：获取并结构化**业务目标场景**，再反推潜在QA并给驱动建pedigree。
- 结论：缺QA场景→QAW；缺业务目标→PALM。

1. **Stakeholder Interview vs QAW**

- 访谈：一对一/小范围，适合补遗漏干系人、快速澄清。
- QAW：群体工作坊，强在“共同生成 + 投票排序 + 场景细化”。
- 结论：规模小先访谈；需要共识与排序用QAW。

1. **Business Goal vs Requirement**

- 业务目标：为什么要做/要达成什么业务结果（上游驱动）。
- 需求：系统要做什么/达到什么属性（可直接落到实现或验证）。
- 结论：业务目标用于反推ASR与优先级。

1. **Business Goal Scenario vs QA Scenario**

- 业务目标场景：7要素（source/subject/object/environment/goal/measure/pedigree&value）。
- QA场景：六段式（source–stimulus–artifact–environment–response–response measure）。
- 结论：一个讲“达成业务”，一个讲“系统如何响应并可测”。

1. **Goal-measure vs Pedigree**

- Goal-measure：是否达成目标的可测试度量（常含时间）。
- Pedigree：该目标/驱动的可信度与依据来源。
- 结论：measure解决“怎么验收”，pedigree解决“凭什么相信”。

1. **Impact on Architecture vs Business/Mission Value**

- Impact：对结构/关键决策的影响强度（会不会改架构）。
- Value：干系人认为的重要性与业务收益。
- 结论：ASR优先处理 (H,H)。

1. **Utility Tree vs 需求列表/Backlog**

- Utility Tree：按QA类别组织，叶子挂场景，并用影响×价值排序。
- Backlog：按功能/任务排，未必突出“架构影响”。
- 结论：效用树更适合架构阶段的聚焦与评估输入。

1. **Prioritization（排序）vs Refinement（细化）**

- 排序：决定“先处理谁”（投票、H/M/L）。
- 细化：把Top项写成可验证的完整场景（补度量等）。
- 结论：先排序再细化，否则浪费成本。

------

# C. 6道简答题标准答案（完全卷面写法）

## 1）什么是ASR？ASR具备哪些特征？

**答：**

- ASR（架构显著需求）是指对软件架构具有**深刻影响**的需求。
- 判断标准：若加入/删除该需求会导致系统采取不同的结构或关键决策取舍，则该需求为ASR。
- ASR通常同时具有：①高影响（impact on architecture高）；②高业务/使命价值（business/mission value高）。
- ASR应被优先捕获、排序并作为架构设计与评估的驱动输入。

## 2）为什么不能只依赖需求文档来识别ASR？

**答：**

- 实际项目中常缺乏高质量、持续维护的需求文档，且规格说明更偏功能而非质量属性。
- 质量属性常以“高性能/高可用/模块化”等口号表达，缺少可验证度量，难以驱动架构决策。
- 需求在早期往往处于变化（flux），架构师不能等待需求完全稳定，必须并行识别驱动并推进架构。
- 因此需要结合干系人访谈、QAW、业务目标与PALM等手段补全ASR。

## 3）QAW是什么？它的主要步骤与产出是什么？

**答：**

- QAW是主持人引导的干系人工作坊方法，在架构完成前生成、排序并细化质量属性场景。
- 关键步骤：介绍与动机→业务/使命介绍→架构设想介绍→识别架构驱动→场景头脑风暴→场景合并→投票排序（每人票数=场景数的30%）→Top场景六段式细化。
- 主要产出：①架构驱动列表；②经干系人排序的QA场景集合；③Top场景的六段式细化版本（含response measure）。

## 4）PALM是什么？PALM如何产生“findings”？为什么要建立pedigree？

**答：**

- PALM是以工作坊形式实施的七步法（通常一天半），由架构师与能代表业务目标的干系人参加，用于获取并结构化业务目标场景，并将其与质量属性驱动关联。
- PALM在对业务目标场景优先级化后：
  - 从重要业务目标识别潜在质量属性：若该QA尚未成为需求，则记录为**finding**；
  - 对现有QA驱动检查其支持的业务目标：若无法映射到任何业务目标，则记录为**finding**。
- 建立pedigree用于追溯定量要求来源与可信度，避免干系人给出随意数字，提升需求可验证与可协商性。

## 5）业务目标场景（Business Goal Scenario）的7个组成部分是什么？为什么必须包含goal-measure？

**答：**

- 7部分：goal-source、goal-subject、goal-object、environment、goal、goal-measure、pedigree and value（含价值/波动性）。
- goal-measure提供可测试的验收标准，通常含时间因素，以便判断目标是否达成并用于反推支撑目标的架构驱动。

## 6）Utility Tree是什么？画出来后如何使用？（含“可达成性预警”）

**答：**

- Utility tree用于集中记录ASR并按“对架构影响×业务/使命价值”进行优先级化；以Utility为根，第二层为QA类别，第三层细化类别，叶子挂场景并标注等级。
- 使用方法：
  - 若某QA分支无ASR，不一定错误，但需回溯检查是否遗漏；
  - 优先处理 (H,H) 的ASR；
  - 若 (H,H) 过多，应评估系统是否可达成（achievable）；
  - 让关键干系人复核效用树，确保关注点覆盖并形成共同“marching orders”